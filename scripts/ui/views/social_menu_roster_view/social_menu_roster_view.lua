-- Decompilation Error: _glue_flows(node)

-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
local Promise = require("scripts/foundation/utilities/promise")
local ScriptWorld = require("scripts/foundation/utilities/script_world")
local UIRenderer = require("scripts/managers/ui/ui_renderer")
local UIScenegraph = require("scripts/managers/ui/ui_scenegraph")
local UIWidget = require("scripts/managers/ui/ui_widget")
local UISoundEvents = require("scripts/settings/ui/ui_sound_events")
local UIWidgetGrid = require("scripts/ui/widget_logic/ui_widget_grid")
local Definitions = require("scripts/ui/views/social_menu_roster_view/social_menu_roster_view_definitions")
local Blueprints = require("scripts/ui/views/social_menu_roster_view/social_menu_roster_view_blueprints")
local RosterViewStyles = require("scripts/ui/views/social_menu_roster_view/social_menu_roster_view_styles")
local SocialConstants = require("scripts/managers/data_service/services/social/social_constants")
local SocialMenuSettings = require("scripts/ui/views/social_menu_view/social_menu_view_settings")
local ViewElementPlayerSocialPopup = require("scripts/ui/view_elements/view_element_player_social_popup/view_element_player_social_popup")
local XboxLive = require("scripts/foundation/utilities/xbox_live")
local OnlineStatus = SocialConstants.OnlineStatus
local PartyStatus = SocialConstants.PartyStatus
local FriendStatus = SocialConstants.FriendStatus
local social_service = Managers.data_service.social
local SocialMenuRosterView = class("SocialMenuRosterView", "BaseView")
local POPUP_NAME = "player_social_popup"
local FRIENDS_LIST = 1
local PREVIOUS_MISSION_COMPANIONS_LIST = 2
local HUB_PLAYERS_LIST = 3
local FRIEND_INVITES_LIST = 4
local BLOCKED_PLAYERS_LIST = 5
local ROSTER_GRID_SCENEGRAPH_ID = "roster_grid_content"
local PARTY_GRID_SCENEGRAPH_ID = "party_grid"
local PARTY_GRID_ID = 1
local ROSTER_GRID_ID = 2
local _SCENEGRAPH_IDS = {
	[PARTY_GRID_ID] = PARTY_GRID_SCENEGRAPH_ID,
	[ROSTER_GRID_ID] = ROSTER_GRID_SCENEGRAPH_ID
}

local function _debug_warning(function_name, format, ...)
	local message_format = string.format("%s(): %s", function_name, format)

	Log.exception("SocialMenuRosterView", message_format, ...)
end

local function _sort_by_name(a, b)
	return a:user_display_name() < b:user_display_name()
end

local function sort_by_last_played_together(a, b)
	local a_time = a:last_time_played_with()
	local b_time = b:last_time_played_with()

	if a_time == b_time then
		return _sort_by_name(a, b)
	end

	if not a_time then
		return false
	end

	if not b_time then
		return true
	end

	return b_time < a_time
end

local function _default_group_selection_function(player_info)
	local online_status = player_info:online_status()

	if online_status == OnlineStatus.online or online_status == OnlineStatus.reconnecting then
		return 1
	elseif online_status == OnlineStatus.platform_online then
		return 2
	else
		return 3
	end
end

local function _group_by_invite(player_info)
	local friend_status = player_info:friend_status()
	local online_status = player_info:online_status()

	if friend_status == FriendStatus.invite then
		if online_status == OnlineStatus.online then
			return 1
		elseif online_status == OnlineStatus.platform_online then
			return 2
		else
			return 3
		end
	elseif friend_status == FriendStatus.invited then
		if online_status == OnlineStatus.online then
			return 4
		elseif online_status == OnlineStatus.platform_online then
			return 5
		else
			return 6
		end
	else
		return 7
	end
end

local function _sort_by_default_group_selection(a, b)
	local a_group_id = _default_group_selection_function(a)
	local b_group_id = _default_group_selection_function(b)

	if a_group_id == b_group_id then
		return _sort_by_name(a, b)
	end

	return a_group_id < b_group_id
end

local function _sort_by_invite(a, b)
	local a_group_id = _group_by_invite(a)
	local b_group_id = _group_by_invite(b)

	if a_group_id == b_group_id then
		return _sort_by_name(a, b)
	end

	return a_group_id < b_group_id
end

local _groups_by_online_status = {
	{
		blueprint = "group_header",
		header = "loc_social_menu_friend_list_group_header_in_game",
		group_name = "in_game",
		item_blueprint = "player_plaque",
		members = {}
	},
	{
		blueprint = "group_header",
		header = "loc_social_menu_friend_list_group_header_online",
		group_name = "platform_online",
		item_blueprint = "player_plaque_platform_online",
		members = {}
	},
	{
		blueprint = "group_header",
		header = "loc_social_menu_friend_list_group_header_offline",
		group_name = "offline",
		item_blueprint = "player_plaque_offline",
		members = {}
	}
}

SocialMenuRosterView.init = function (self, settings, context)
	self._parent = context and context.parent
	self._players_by_account_id = {}
	local roster_lists = {
		[FRIENDS_LIST] = {
			group_select_function = _default_group_selection_function,
			primary_sort_function = _sort_by_default_group_selection,
			groups = _groups_by_online_status,
			sorted_list = {}
		},
		[PREVIOUS_MISSION_COMPANIONS_LIST] = {
			group_select_function = _default_group_selection_function,
			primary_sort_function = _sort_by_default_group_selection,
			groups = _groups_by_online_status,
			sorted_list = {}
		},
		[HUB_PLAYERS_LIST] = {
			group_select_function = function (player_info)
				return 1
			end,
			primary_sort_function = _sort_by_name,
			groups = {
				{
					blueprint = "group_header",
					header = "loc_social_menu_friend_list_group_header_in_game",
					group_name = "in_hub",
					item_blueprint = "player_plaque",
					members = {}
				},
				{
					blueprint = "group_header",
					header = "loc_social_menu_friend_list_group_header_not_in_hub",
					group_name = "not_in_hub",
					item_blueprint = "player_plaque_offline",
					members = {}
				}
			},
			sorted_list = {}
		},
		[FRIEND_INVITES_LIST] = {
			group_select_function = _group_by_invite,
			primary_sort_function = _sort_by_invite,
			groups = {
				{
					blueprint = "group_header",
					header = "loc_social_menu_friend_list_group_header_received_invites",
					group_name = "received_invites",
					item_blueprint = "player_plaque",
					members = {}
				},
				{
					no_divider = true,
					item_blueprint = "player_plaque_platform_online",
					group_name = "received_invites_platform_online",
					members = {}
				},
				{
					no_divider = true,
					item_blueprint = "player_plaque_offline",
					group_name = "received_invites_offline",
					members = {}
				},
				{
					blueprint = "group_header",
					header = "loc_social_menu_friend_list_group_header_sent_invites",
					group_name = "sent_invites",
					item_blueprint = "player_plaque",
					members = {}
				},
				{
					no_divider = true,
					item_blueprint = "player_plaque_platform_online",
					group_name = "sent_invites_platform_online",
					members = {}
				},
				{
					no_divider = true,
					item_blueprint = "player_plaque_offline",
					group_name = "sent_invites_offline",
					members = {}
				},
				{
					blueprint = "group_header",
					header = "loc_social_menu_friend_list_group_header_no_invites",
					group_name = "no_invites",
					item_blueprint = "player_plaque_offline",
					members = {}
				}
			},
			sorted_list = {}
		},
		[BLOCKED_PLAYERS_LIST] = {
			group_select_function = function (player_info)
				return 1
			end,
			primary_sort_function = _sort_by_name,
			groups = {
				{
					blueprint = "group_header",
					header = "loc_social_menu_friend_list_group_header_blocked",
					group_name = "blocked",
					item_blueprint = "player_plaque_blocked",
					members = {}
				}
			},
			sorted_list = {}
		}
	}
	self._party_promise = Promise.resolved()
	self._roster_lists_promise = Promise.resolved()
	self._roster_lists = roster_lists
	self._tab_ids = {}
	self._grids = {
		[PARTY_GRID_ID] = nil,
		[ROSTER_GRID_ID] = nil
	}
	self._grid_widget_definitions = {
		[PARTY_GRID_ID] = {},
		[ROSTER_GRID_ID] = {}
	}
	self._focused_grid_id = nil
	self._popup_menu = nil
	self._refresh_list_delay = 0
	self._roster_widgets = {}
	self._party_widgets = {}
	self._widgets_with_portraits = {}
	self._num_pending_invites = 0
	self._widgets_are_fading = nil
	self._fade_time = 0
	self._widget_fade_time = SocialMenuSettings.widget_fade_time
	self._fade_delay = 0
	self._selected_roster_widget_column_last_frame = 1

	SocialMenuRosterView.super.init(self, Definitions, settings)
end

SocialMenuRosterView.on_enter = function (self)
	SocialMenuRosterView.super.on_enter(self)

	self._pass_input = true
	self._allow_close_hotkey = false
	local view_element_definitions = self._definitions.view_elements

	for element_name, params in pairs(view_element_definitions) do
		local element = self:_add_element(params.class, element_name, params.layer, params.context)
		local element_init = callback(self, params.init)

		element_init(element, params.init_params)
	end

	self:_create_offscreen_renderer()
	self:_create_party_grid()

	local force_refresh_lists = true

	self:_refresh_roster_lists(force_refresh_lists)
	self:_refresh_party_list()
	self:set_next_roster_filter(FRIENDS_LIST)
	self:_fade_widgets("in")

	if self._parent then
		self._parent:set_active_view_instance(self)
	end
end

SocialMenuRosterView.on_exit = function (self)
	local widgets_with_portraits = self._widgets_with_portraits

	while #widgets_with_portraits > 0 do
		self:_unload_widget_portrait(widgets_with_portraits[#widgets_with_portraits])
	end

	self:_destroy_renderer()
	SocialMenuRosterView.super.on_exit(self)
end

SocialMenuRosterView.set_can_exit = function (self, value, apply_next_frame)
	if not apply_next_frame then
		self._can_close = value

		self._parent:set_can_navigate(value)
	else
		self._next_frame_can_close = value
		self._can_close_frame_counter = 1
	end
end

SocialMenuRosterView.update = function (self, dt, t, input_service)
	local next_list_index = self._next_list_index

	if not self._roster_lists_promise:is_pending() then
		local new_list_data = self._new_list_data
		local current_list_index = self._current_list_index

		if next_list_index == current_list_index then
			next_list_index = nil
			self._next_list_index = nil
		end

		if new_list_data then
			for i = 1, #new_list_data, 1 do
				local list = new_list_data[i]

				if list then
					self:_update_roster_list(i, list, i == current_list_index and not next_list_index)
				end
			end

			self._new_list_data = nil
		end

		self:_check_can_exit()
		self:_update_list_refreshes(dt)
	end

	if next_list_index then
		local list_items_metadata = self._roster_lists[next_list_index]
		local list_items = list_items_metadata.sorted_list

		self:_setup_roster_grid(list_items)

		self._current_list_index = next_list_index
		self._next_list_index = nil
	end

	self:_update_portraits()
	self:_update_view_visibility(dt, t, input_service)

	local grid_input_service = (self._popup_menu and input_service:null_service()) or input_service
	local grids = self._grids

	for i = 1, #grids, 1 do
		grids[i]:update(dt, t, grid_input_service)
	end

	return SocialMenuRosterView.super.update(self, dt, t, input_service)
end

SocialMenuRosterView.draw = function (self, dt, t, input_service, layer)
	local offscreen_renderer = self._offscreen_renderer
	local render_settings = self._render_settings
	local alpha_multiplier = render_settings.alpha_multiplier or 0

	if offscreen_renderer and alpha_multiplier > 0 and self._grids[ROSTER_GRID_ID] then
		UIRenderer.begin_pass(offscreen_renderer, self._ui_scenegraph, input_service, dt, render_settings)
		self:_draw_roster_grid(dt, t, input_service, offscreen_renderer)
		UIRenderer.end_pass(offscreen_renderer)
	end

	SocialMenuRosterView.super.draw(self, dt, t, input_service, layer)
end

SocialMenuRosterView.on_resolution_modified = function (self)
	SocialMenuRosterView.super.on_resolution_modified(self)
	self:_position_tab_bar()
end

SocialMenuRosterView._on_navigation_input_changed = function (self)
	SocialMenuRosterView.super._on_navigation_input_changed(self)

	local is_using_cursor_navigation = self._using_cursor_navigation
	local popup_menu = self._popup_menu

	if popup_menu then
		popup_menu:on_navigation_input_changed(is_using_cursor_navigation)
	end

	local focused_grid_id = (not is_using_cursor_navigation and (self._focused_grid_id or PARTY_GRID_ID)) or nil
	local grids = self._grids

	for i = #grids, 1, -1 do
		local grid = grids[i]
		local selected_grid_index = nil
		local is_focused_grid = i == focused_grid_id

		if is_focused_grid then
			selected_grid_index = grid:selected_grid_index()

			if not selected_grid_index then
				grid:select_first_index()

				selected_grid_index = grid:selected_grid_index()

				if not selected_grid_index then
					focused_grid_id = math.max(focused_grid_id - 1, 1)
				end
			end
		end

		local grid_widgets = grid:widgets()

		if grid_widgets then
			for j = 1, #grid_widgets, 1 do
				local widget = grid_widgets[j]
				local widget_hotspot = widget.content.hotspot

				if widget_hotspot then
					widget_hotspot.is_focused = j == selected_grid_index
				end
			end
		end
	end

	self._focused_grid_id = focused_grid_id
end

SocialMenuRosterView.set_next_roster_filter = function (self, list_index)
	local tab_id = self._tab_ids[list_index]

	if self._player_list_tab_bar:tab_disabled(tab_id) then
		local num_lists = #self._roster_lists
		local current_list_index = self._current_list_index

		if current_list_index < list_index or (current_list_index == num_lists and list_index == 1) then
			list_index = math.index_wrapper(list_index + 1, num_lists)
		else
			list_index = math.index_wrapper(list_index - 1, num_lists)
		end
	end

	self._player_list_tab_bar:set_selected_index(list_index)

	self._next_list_index = list_index
end

local _formatted_character_name_character_name_params = {}

SocialMenuRosterView.formatted_character_name = function (self, player_info)
	local character_name = player_info:character_name()

	if character_name ~= "" then
		local character_name_params = _formatted_character_name_character_name_params
		character_name_params.character_name = character_name
		character_name_params.character_level = player_info:character_level()
		character_name = Localize("loc_social_menu_character_name_format", true, character_name_params)
	end

	return character_name
end

SocialMenuRosterView.cb_switch_roster_filter = function (self, index)
	if self._using_cursor_navigation then
		self:set_next_roster_filter(index)
	end
end

SocialMenuRosterView.cb_close_popup_menu = function (self)
	self:_close_popup_menu()
end

SocialMenuRosterView.cb_on_popup_menu_closed = function (self)
	self:_remove_popup_menu()
end

SocialMenuRosterView.cb_leave_party = function (self)
	self:_close_popup_menu()
	self:_show_confirmation_popup(nil, "leave_party")
end

SocialMenuRosterView.cb_vote_to_kick_player_from_party = function (self, player_info)
	if social_service:can_kick_from_party(player_info) then
		self:_show_confirmation_popup(player_info, "initiate_kick_vote", player_info)
	else
		_debug_warning("cb_vote_to_kick_player_from_party", "Cannot initiate vote; Not all requirements met.")
	end

	self:_close_popup_menu()
end

SocialMenuRosterView.cb_invite_player_to_party = function (self, player_info)
	social_service:send_party_invite(player_info)
	self:_close_popup_menu()
end

SocialMenuRosterView.cb_cancel_party_invite = function (self, player_info)
	social_service:cancel_party_invite(player_info)
	self:_close_popup_menu()
end

SocialMenuRosterView.cb_join_players_party = function (self, player_info)
	self:_close_popup_menu()
	social_service:join_party(player_info:party_id()):next(function (party)
		self:_play_sound(UISoundEvents.social_menu_join_party)
		self:_refresh_party_list()
	end):catch(function (error)
		self:_play_sound(UISoundEvents.social_menu_join_party_failed)
	end)
end

SocialMenuRosterView.cb_show_player_profile = function (self, player_info)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-4, warpins: 1 ---
	self:_close_popup_menu()

	return
	--- END OF BLOCK #0 ---



end

SocialMenuRosterView.cb_show_xbox_profile = function (self, player_info)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-11, warpins: 1 ---
	self:_close_popup_menu()

	local xuid = player_info:platform_user_id()

	XboxLive.show_player_profile_card(xuid)

	return
	--- END OF BLOCK #0 ---



end

SocialMenuRosterView.cb_invite_player_to_guild = function (self, player_info)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-4, warpins: 1 ---
	self:_close_popup_menu()

	return
	--- END OF BLOCK #0 ---



end

SocialMenuRosterView.cb_send_friend_request = function (self, player_info)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-10, warpins: 1 ---
	local account_id = player_info:account_id()
	local friend_status = player_info:friend_status()

	if friend_status == FriendStatus.none then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 11-16, warpins: 1 ---
		social_service:send_friend_request(account_id)
		--- END OF BLOCK #0 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 17-26, warpins: 1 ---
		_debug_warning("cb_send_friend_request", "FriendStatus is [%s] for account %s, expected: [%s]", tostring(friend_status), account_id, FriendStatus.none)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 27-30, warpins: 2 ---
	self:_close_popup_menu()

	return
	--- END OF BLOCK #1 ---



end

SocialMenuRosterView.cb_cancel_friend_request = function (self, player_info)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-8, warpins: 1 ---
	local account_id = player_info:account_id()
	local friend_status = player_info:friend_status()

	if account_id and friend_status == FriendStatus.invited then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 13-18, warpins: 1 ---
		social_service:cancel_friend_request(account_id)
		--- END OF BLOCK #0 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 19-28, warpins: 2 ---
		_debug_warning("cb_cancel_friend_request", "FriendStatus is [%s] for account %s, expected: [%s]", tostring(friend_status), account_id, FriendStatus.invited)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 29-32, warpins: 2 ---
	self:_close_popup_menu()

	return
	--- END OF BLOCK #1 ---



end

SocialMenuRosterView.cb_accept_friend_request = function (self, player_info)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-10, warpins: 1 ---
	local account_id = player_info:account_id()
	local friend_status = player_info:friend_status()

	if friend_status == FriendStatus.invite then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 11-16, warpins: 1 ---
		social_service:accept_friend_request(account_id)
		--- END OF BLOCK #0 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 17-26, warpins: 1 ---
		_debug_warning("cb_accept_friend_request", "FriendStatus is [%s] for account %s, expected: [%s]", tostring(friend_status), account_id, FriendStatus.invite)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 27-30, warpins: 2 ---
	self:_close_popup_menu()

	return
	--- END OF BLOCK #1 ---



end

SocialMenuRosterView.cb_reject_friend_request = function (self, player_info)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-10, warpins: 1 ---
	local account_id = player_info:account_id()
	local friend_status = player_info:friend_status()

	if friend_status == FriendStatus.invite then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 11-16, warpins: 1 ---
		social_service:reject_friend_request(account_id)
		--- END OF BLOCK #0 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 17-26, warpins: 1 ---
		_debug_warning("cb_reject_friend_request", "FriendStatus is [%s] for account %s, expected: [%s]", tostring(friend_status), account_id, FriendStatus.invite)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 27-30, warpins: 2 ---
	self:_close_popup_menu()

	return
	--- END OF BLOCK #1 ---



end

SocialMenuRosterView.cb_unfriend_player = function (self, player_info)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-10, warpins: 1 ---
	local account_id = player_info:account_id()
	local friend_status = player_info:friend_status()

	if friend_status == FriendStatus.friend then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 11-16, warpins: 1 ---
		self:_show_confirmation_popup(player_info, "unfriend_player")
		--- END OF BLOCK #0 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 17-26, warpins: 1 ---
		_debug_warning("cb_unfriend_player", "FriendStatus is [%s] for account %s, expected: [%s]", tostring(friend_status), account_id, FriendStatus.friend)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 27-30, warpins: 2 ---
	self:_close_popup_menu()

	return
	--- END OF BLOCK #1 ---



end

SocialMenuRosterView.cb_mute_text_chat = function (self, player_info, is_muted)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-5, warpins: 1 ---
	local account_id = player_info:account_id()

	if account_id then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 6-12, warpins: 1 ---
		social_service:mute_player_in_text_chat(account_id, is_muted)
		--- END OF BLOCK #0 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 13-16, warpins: 1 ---
		_debug_warning("cb_mute_text_chat", "Cannot mute player; no account_id")
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 17-17, warpins: 2 ---
	return
	--- END OF BLOCK #1 ---



end

SocialMenuRosterView.cb_mute_voice_chat = function (self, player_info, is_muted)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-8, warpins: 1 ---
	local account_id = player_info:account_id()
	local friend_status = player_info:friend_status()

	if account_id then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 9-15, warpins: 1 ---
		social_service:mute_player_in_voice_chat(account_id, is_muted)
		--- END OF BLOCK #0 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 16-19, warpins: 1 ---
		_debug_warning("cb_mute_text_chat", "Cannot mute player; no account_id")
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 20-20, warpins: 2 ---
	return
	--- END OF BLOCK #1 ---



end

SocialMenuRosterView.cb_unblock_player = function (self, player_info)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-9, warpins: 1 ---
	self:_close_popup_menu()
	self:_show_confirmation_popup(player_info, "unblock_account")

	return
	--- END OF BLOCK #0 ---



end

SocialMenuRosterView.cb_block_player = function (self, player_info)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-9, warpins: 1 ---
	self:_close_popup_menu()
	self:_show_confirmation_popup(player_info, "block_account")

	return
	--- END OF BLOCK #0 ---



end

SocialMenuRosterView.cb_report_player = function (self, player_info)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-4, warpins: 1 ---
	self:_close_popup_menu()

	return
	--- END OF BLOCK #0 ---



end

SocialMenuRosterView.cb_update_roster = function (self, results)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-3, warpins: 1 ---
	if self._destroyed then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 4-4, warpins: 1 ---
		return
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 5-9, warpins: 2 ---
	self._new_list_data = results
	self._refresh_list_delay = SocialMenuSettings.list_refresh_time

	return
	--- END OF BLOCK #1 ---



end

SocialMenuRosterView.cb_show_popup_menu_for_player = function (self, player_info)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-3, warpins: 1 ---
	local popup_menu = self._popup_menu

	if popup_menu then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 4-4, warpins: 1 ---
		return
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 5-28, warpins: 2 ---
	local start_layer = SocialMenuSettings.popup_start_layer
	popup_menu = self:_add_element(ViewElementPlayerSocialPopup, POPUP_NAME, start_layer)
	self._popup_menu = popup_menu

	self:set_can_exit(false)
	self:_fade_widgets("out")

	local material_values = nil
	local widgets_with_portraits = self._widgets_with_portraits

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 29-37, warpins: 0 ---
	for i = 1, #widgets_with_portraits, 1 do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 29-33, warpins: 2 ---
		local widget = widgets_with_portraits[i]
		local content = widget.content

		if content.player_info == player_info then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 34-36, warpins: 1 ---
			local portrait_style = widget.style.portrait
			material_values = portrait_style.material_values
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 37-37, warpins: 2 ---
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 38-54, warpins: 1 ---
	popup_menu:set_player_info(player_info, material_values)
	popup_menu:on_navigation_input_changed(self._using_cursor_navigation)
	popup_menu:set_close_popup_request_callback(callback(self, "cb_close_popup_menu"))

	return
	--- END OF BLOCK #3 ---



end

SocialMenuRosterView.on_back_pressed = function (self)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-4, warpins: 1 ---
	local back_pressed_handled = false

	if self._popup_menu then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 5-8, warpins: 1 ---
		self:_close_popup_menu()

		back_pressed_handled = true
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 9-10, warpins: 2 ---
	return back_pressed_handled or not self._can_close
	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 13-13, warpins: 2 ---
	--- END OF BLOCK #2 ---



end

SocialMenuRosterView._cb_set_player_icon = function (self, widget, grid_index, rows, columns)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-13, warpins: 1 ---
	local widget_content = widget.content
	widget_content.awaiting_portrait_callback = nil
	local portrait_style = widget.style.portrait
	local material_values = portrait_style.material_values
	material_values.use_placeholder_texture = 0
	material_values.rows = rows
	material_values.columns = columns
	material_values.grid_index = grid_index - 1

	return
	--- END OF BLOCK #0 ---



end

SocialMenuRosterView._cb_set_player_frame = function (self, widget, item)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-9, warpins: 1 ---
	local widget_content = widget.content
	widget_content.awaiting_frame_callback = nil
	local profile = widget_content.player_info:profile()
	local loadout = profile and profile.loadout
	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 11-12, warpins: 2 ---
	local frame_item = loadout and loadout.slot_portrait_frame
	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 14-15, warpins: 2 ---
	local frame_item_gear_id = frame_item and frame_item.gear_id
	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 17-20, warpins: 2 ---
	local icon = nil

	if frame_item_gear_id == item.gear_id then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 21-22, warpins: 1 ---
		icon = item.icon
		--- END OF BLOCK #0 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 23-24, warpins: 1 ---
		icon = RosterViewStyles.default_frame_material
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #3 ---

	FLOW; TARGET BLOCK #4



	-- Decompilation error in this vicinity:
	--- BLOCK #4 25-29, warpins: 2 ---
	local portrait_style = widget.style.portrait
	portrait_style.material_values.portrait_frame_texture = icon

	return
	--- END OF BLOCK #4 ---



end

SocialMenuRosterView._update_list_refreshes = function (self, dt)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-3, warpins: 1 ---
	local delay = self._refresh_list_delay or 0
	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 5-8, warpins: 2 ---
	delay = delay - dt

	if delay < 0 then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 9-16, warpins: 1 ---
		self:_refresh_party_list()
		self:_refresh_roster_lists()

		delay = SocialMenuSettings.list_refresh_time
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 17-18, warpins: 2 ---
	self._refresh_list_delay = delay

	return
	--- END OF BLOCK #2 ---



end

SocialMenuRosterView._update_portraits = function (self)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-5, warpins: 1 ---
	local widgets_with_portraits = self._widgets_with_portraits

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 6-60, warpins: 0 ---
	for i = #widgets_with_portraits, 1, -1 do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 6-13, warpins: 2 ---
		local widget = widgets_with_portraits[i]
		local content = widget.content
		local player_info = content.player_info
		local profile = player_info:profile()

		if not profile then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 14-20, warpins: 1 ---
			self:_unload_widget_portrait(widget)

			content.profile_hash = nil
			--- END OF BLOCK #0 ---



		else

			-- Decompilation error in this vicinity:
			--- BLOCK #0 21-24, warpins: 1 ---
			if profile.character_id ~= content.portrait_character_id then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 25-31, warpins: 1 ---
				self:_load_widget_portrait(widget, profile, content.portrait_renderer)
				--- END OF BLOCK #0 ---



			else

				-- Decompilation error in this vicinity:
				--- BLOCK #0 32-35, warpins: 1 ---
				if profile.hash ~= content.profile_hash then

					-- Decompilation error in this vicinity:
					--- BLOCK #0 36-41, warpins: 1 ---
					local character_name = self:formatted_character_name(player_info)

					if character_name ~= "" then

						-- Decompilation error in this vicinity:
						--- BLOCK #0 42-59, warpins: 1 ---
						content.name_or_activity = character_name
						content.activity_id = nil

						Managers.event:trigger("event_player_profile_updated", nil, nil, profile)
						self:_update_portrait_frame(widget, profile)

						content.profile_hash = profile.hash
						--- END OF BLOCK #0 ---



					end
					--- END OF BLOCK #0 ---



				end
				--- END OF BLOCK #0 ---



			end
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 60-60, warpins: 5 ---
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 61-61, warpins: 1 ---
	return
	--- END OF BLOCK #2 ---



end

SocialMenuRosterView._update_view_visibility = function (self, dt, t, input_service)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-3, warpins: 1 ---
	local widgets_are_fading = self._widgets_are_fading

	if widgets_are_fading then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 4-8, warpins: 1 ---
		local fade_time = self._fade_time
		local fade_delay = self._fade_delay

		if fade_delay > 0 then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 9-15, warpins: 1 ---
			self._fade_delay = math.max(fade_delay - dt, 0)
			--- END OF BLOCK #0 ---



		else

			-- Decompilation error in this vicinity:
			--- BLOCK #0 16-17, warpins: 1 ---
			fade_time = fade_time + dt
			self._fade_time = fade_time
			--- END OF BLOCK #0 ---



		end

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 18-22, warpins: 2 ---
		local normalized_time = fade_time / self._widget_fade_time

		if normalized_time >= 1 then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 23-25, warpins: 1 ---
			normalized_time = 1
			self._widgets_are_fading = nil
			--- END OF BLOCK #0 ---



		end

		--- END OF BLOCK #1 ---

		FLOW; TARGET BLOCK #2



		-- Decompilation error in this vicinity:
		--- BLOCK #2 26-27, warpins: 2 ---
		if widgets_are_fading == "out" then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 28-31, warpins: 1 ---
			self._render_settings.alpha_multiplier = 1 - normalized_time
			--- END OF BLOCK #0 ---



		else

			-- Decompilation error in this vicinity:
			--- BLOCK #0 32-33, warpins: 1 ---
			self._render_settings.alpha_multiplier = normalized_time
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #2 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 34-34, warpins: 3 ---
	return
	--- END OF BLOCK #1 ---



end

SocialMenuRosterView._draw_widgets = function (self, dt, t, input_service, ui_renderer)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-3, warpins: 1 ---
	if self._popup_menu then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 4-7, warpins: 1 ---
		input_service = input_service:null_service()
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 8-11, warpins: 2 ---
	local widget_alpha_multiplier = ui_renderer.render_settings.alpha_multiplier or 0

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 13-15, warpins: 2 ---
	if widget_alpha_multiplier > 0 then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 16-20, warpins: 1 ---
		local party_widgets = self._party_widgets

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 21-26, warpins: 0 ---
		for i = 1, #party_widgets, 1 do

			-- Decompilation error in this vicinity:
			--- BLOCK #0 21-26, warpins: 2 ---
			UIWidget.draw(party_widgets[i], ui_renderer)
			--- END OF BLOCK #0 ---



		end

		--- END OF BLOCK #1 ---

		FLOW; TARGET BLOCK #2



		-- Decompilation error in this vicinity:
		--- BLOCK #2 27-35, warpins: 1 ---
		SocialMenuRosterView.super._draw_widgets(self, dt, t, input_service, ui_renderer)
		--- END OF BLOCK #2 ---



	end

	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 36-36, warpins: 2 ---
	return
	--- END OF BLOCK #3 ---



end

SocialMenuRosterView._draw_roster_grid = function (self, dt, t, input_service, ui_renderer)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-13, warpins: 1 ---
	local widgets = self._roster_widgets
	local grid = self._grids[ROSTER_GRID_ID]
	local margin = RosterViewStyles.roster_grid.mask_expansion[2]
	local interaction_widget = self._widgets_by_name.roster_grid_interaction
	local is_grid_hovered = not self._using_cursor_navigation or interaction_widget.content.hotspot.is_hover

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 21-24, warpins: 3 ---
	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 25-44, warpins: 0 ---
	for i = 1, #widgets, 1 do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 25-32, warpins: 2 ---
		local widget = widgets[i]

		if grid:is_widget_visible(widget, margin) then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 33-36, warpins: 1 ---
			local hotspot = widget.content.hotspot

			if hotspot then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 37-38, warpins: 1 ---
				hotspot.force_disabled = not is_grid_hovered
				--- END OF BLOCK #0 ---



			end

			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 39-43, warpins: 2 ---
			UIWidget.draw(widget, ui_renderer)
			--- END OF BLOCK #1 ---



		end
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 44-44, warpins: 2 ---
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 45-45, warpins: 1 ---
	return
	--- END OF BLOCK #3 ---



end

SocialMenuRosterView._position_tab_bar = function (self)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-20, warpins: 1 ---
	local scenegraph_id = "roster_panel_tabs"
	local position = self:_scenegraph_world_position(scenegraph_id, 1)
	local size_x = self:_scenegraph_size(scenegraph_id)
	local center_position = position[1] + size_x / 2

	self._player_list_tab_bar:set_pivot_offset(center_position, position[2])

	return
	--- END OF BLOCK #0 ---



end

SocialMenuRosterView._create_offscreen_renderer = function (self)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-48, warpins: 1 ---
	local view_name = self.view_name
	local world_layer = 10
	local world_name = self.__class_name .. "_ui_offscreen_world"
	local world = Managers.ui:create_world(world_name, world_layer, nil, view_name)
	local viewport_name = "offscreen_viewport"
	local viewport_type = "overlay_offscreen"
	local viewport_layer = 1
	local shading_environment = SocialMenuSettings.shading_environment
	local viewport = Managers.ui:create_viewport(world, viewport_name, viewport_type, viewport_layer, shading_environment)
	local renderer_name = self.__class_name .. "offscreen_renderer"
	self._offscreen_renderer = Managers.ui:create_renderer(renderer_name, world)
	self._offscreen_world = {
		name = world_name,
		world = world,
		viewport = viewport,
		viewport_name = viewport_name,
		renderer_name = renderer_name
	}

	return
	--- END OF BLOCK #0 ---



end

SocialMenuRosterView._destroy_renderer = function (self)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-3, warpins: 1 ---
	if self._offscreen_renderer then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 4-5, warpins: 1 ---
		self._offscreen_renderer = nil
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 6-8, warpins: 2 ---
	local world_data = self._offscreen_world

	if world_data then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 9-27, warpins: 1 ---
		Managers.ui:destroy_renderer(world_data.renderer_name)
		ScriptWorld.destroy_viewport(world_data.world, world_data.viewport_name)
		Managers.ui:destroy_world(world_data.world)

		self._offscreen_world = nil
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 28-28, warpins: 2 ---
	return
	--- END OF BLOCK #2 ---



end

SocialMenuRosterView._setup_tab_bar = function (self, tab_bar, params)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-7, warpins: 1 ---
	self._player_list_tab_bar = tab_bar
	local tab_button_template = params.tab_button_template
	local tabs = params.tabs

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 8-31, warpins: 0 ---
	for i = 1, #tabs, 1 do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 8-13, warpins: 2 ---
		local tab_params = tabs[i]
		local title = tab_params
		local update_function = nil

		if i == FRIEND_INVITES_LIST then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 14-14, warpins: 1 ---
			function update_function(content, style)

				-- Decompilation error in this vicinity:
				--- BLOCK #0 1-5, warpins: 1 ---
				local num_pending_invites = self._num_pending_invites

				if num_pending_invites ~= content.num_pending_invites then

					-- Decompilation error in this vicinity:
					--- BLOCK #0 6-11, warpins: 1 ---
					local localized_label = Localize(title)

					if num_pending_invites > 99 then

						-- Decompilation error in this vicinity:
						--- BLOCK #0 12-18, warpins: 1 ---
						localized_label = string.format("%s (99+)", localized_label)
						--- END OF BLOCK #0 ---



					else

						-- Decompilation error in this vicinity:
						--- BLOCK #0 19-21, warpins: 1 ---
						if num_pending_invites > 0 then

							-- Decompilation error in this vicinity:
							--- BLOCK #0 22-28, warpins: 1 ---
							localized_label = string.format("%s (%d)", localized_label, num_pending_invites)
							--- END OF BLOCK #0 ---



						end
						--- END OF BLOCK #0 ---



					end

					--- END OF BLOCK #0 ---

					FLOW; TARGET BLOCK #1



					-- Decompilation error in this vicinity:
					--- BLOCK #1 29-32, warpins: 3 ---
					content.text = localized_label
					content.num_pending_invites = num_pending_invites

					return true
					--- END OF BLOCK #1 ---



				end

				--- END OF BLOCK #0 ---

				FLOW; TARGET BLOCK #1



				-- Decompilation error in this vicinity:
				--- BLOCK #1 33-34, warpins: 2 ---
				return false
				--- END OF BLOCK #1 ---



			end
			--- END OF BLOCK #0 ---



		end

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 15-31, warpins: 2 ---
		local callback = callback(self, "cb_switch_roster_filter", i)
		local tab_id = tab_bar:add_entry(title, callback, tab_button_template, nil, update_function)
		self._tab_ids[i] = tab_id
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 32-43, warpins: 1 ---
	local input_action_left = "navigate_secondary_left_pressed"
	local input_action_right = "navigate_secondary_right_pressed"

	tab_bar:set_input_actions(input_action_left, input_action_right)
	self:_position_tab_bar()

	return
	--- END OF BLOCK #2 ---



end

SocialMenuRosterView._create_party_grid = function (self)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-25, warpins: 1 ---
	local party_widgets = self._party_widgets
	local grid_direction = "down"
	local grid_spacing = RosterViewStyles.grid_spacing
	self._grids[PARTY_GRID_ID] = UIWidgetGrid:new(party_widgets, nil, self._ui_scenegraph, PARTY_GRID_SCENEGRAPH_ID, grid_direction, grid_spacing, nil, true)

	self:_update_party_list(party_widgets, true)

	return
	--- END OF BLOCK #0 ---



end

SocialMenuRosterView._check_can_exit = function (self)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-3, warpins: 1 ---
	local can_exit = self._popup_menu == nil

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 7-9, warpins: 2 ---
	if can_exit ~= self._can_close and not self._next_frame_can_close then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 13-17, warpins: 1 ---
		self:set_can_exit(can_exit, can_exit)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 18-18, warpins: 3 ---
	return
	--- END OF BLOCK #2 ---



end

SocialMenuRosterView._update_portrait_frame = function (self, widget, profile)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-6, warpins: 1 ---
	local widget_content = widget.content
	local frame_style = widget.style.portrait

	if widget_content.awaiting_frame_callback and profile ~= nil then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 9-9, warpins: 1 ---
		return
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 10-12, warpins: 3 ---
	local frame_load_id = widget_content.frame_load_id

	if frame_load_id then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 13-42, warpins: 1 ---
		local portrait_renderer = widget_content.portrait_renderer

		UIWidget.set_visible(widget, portrait_renderer, false)
		UIWidget.set_visible(widget, portrait_renderer, true)

		local material_values = frame_style.material_values
		local portrait_frame_texture = material_values.portrait_frame_texture
		material_values.portrait_frame_texture = RosterViewStyles.default_frame_material

		Log.info("SocialMenuRosterView", "Destroying frame: %s", portrait_frame_texture)
		Managers.ui:unload_item_icon(frame_load_id)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 43-44, warpins: 2 ---
	local loadout = profile and profile.loadout
	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 46-47, warpins: 2 ---
	local frame_item = loadout and loadout.slot_portrait_frame
	--- END OF BLOCK #3 ---

	FLOW; TARGET BLOCK #4



	-- Decompilation error in this vicinity:
	--- BLOCK #4 49-50, warpins: 2 ---
	local frame_id = frame_item and frame_item.gear_id
	--- END OF BLOCK #4 ---

	FLOW; TARGET BLOCK #5



	-- Decompilation error in this vicinity:
	--- BLOCK #5 52-54, warpins: 2 ---
	widget_content.frame_id = frame_id

	if frame_item then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 55-70, warpins: 1 ---
		local cb = callback(self, "_cb_set_player_frame", widget)
		widget_content.frame_load_id = Managers.ui:load_item_icon(frame_item, cb)
		widget_content.awaiting_frame_callback = true
		--- END OF BLOCK #0 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 71-72, warpins: 1 ---
		widget_content.frame_load_id = nil
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #5 ---

	FLOW; TARGET BLOCK #6



	-- Decompilation error in this vicinity:
	--- BLOCK #6 73-73, warpins: 2 ---
	return
	--- END OF BLOCK #6 ---



end

SocialMenuRosterView._load_widget_portrait = function (self, widget, profile, portrait_renderer)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-4, warpins: 1 ---
	local widget_content = widget.content

	if widget_content.awaiting_portrait_callback then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 5-5, warpins: 1 ---
		return
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 6-8, warpins: 2 ---
	local portrait_load_id = widget_content.portrait_load_id

	if portrait_load_id then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 9-12, warpins: 1 ---
		self:_unload_widget_portrait(widget)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 13-21, warpins: 2 ---
	local profile_icon_loaded_callback = callback(self, "_cb_set_player_icon", widget)
	widget_content.awaiting_portrait_callback = true
	widget_content.portrait_load_id = profile and Managers.ui:load_profile_portrait(profile, profile_icon_loaded_callback)
	widget_content.portrait_character_id = profile and profile.character_id
	widget_content.portrait_renderer = portrait_renderer
	local widgets_with_portraits = self._widgets_with_portraits
	widgets_with_portraits[#widgets_with_portraits + 1] = widget

	return
	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 29-31, warpins: 2 ---
	--- END OF BLOCK #3 ---

	FLOW; TARGET BLOCK #4



	-- Decompilation error in this vicinity:
	--- BLOCK #4 33-39, warpins: 2 ---
	--- END OF BLOCK #4 ---



end

SocialMenuRosterView._unload_widget_portrait = function (self, widget)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-11, warpins: 1 ---
	local widget_content = widget.content
	local portrait_style = widget.style.portrait

	self:_update_portrait_frame(widget, nil)

	local portrait_load_id = widget_content.portrait_load_id

	if not portrait_load_id then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 12-12, warpins: 1 ---
		return
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 13-28, warpins: 2 ---
	local material_values = portrait_style.material_values
	material_values.use_placeholder_texture = 1

	Managers.ui:unload_profile_portrait(portrait_load_id)

	widget_content.portrait_load_id = nil
	local widgets_with_portraits = self._widgets_with_portraits

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 29-38, warpins: 0 ---
	for i = #widgets_with_portraits, 1, -1 do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 29-31, warpins: 2 ---
		if widgets_with_portraits[i] == widget then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 32-37, warpins: 1 ---
			table.remove(widgets_with_portraits, i)

			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 38-38, warpins: 1 ---
			break
			--- END OF BLOCK #1 ---



		end
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 38-38, warpins: 1 ---
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 39-39, warpins: 2 ---
	return
	--- END OF BLOCK #3 ---



end

SocialMenuRosterView._setup_roster_grid = function (self, widget_data)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-32, warpins: 1 ---
	local widgets, widget_alignments = self:_create_roster_widgets(widget_data)
	self._roster_widgets = widgets
	self._roster_alignment_widgets = widget_alignments
	local grid_direction = "down"
	local grid_spacing = RosterViewStyles.grid_spacing
	local roster_grid = UIWidgetGrid:new(widgets, widget_alignments, self._ui_scenegraph, ROSTER_GRID_SCENEGRAPH_ID, grid_direction, grid_spacing, nil, true)
	self._grids[ROSTER_GRID_ID] = roster_grid

	self:_assign_roster_grid_scrollbar(roster_grid, widgets)

	if not self._using_cursor_navigation then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 33-35, warpins: 1 ---
		self:_on_navigation_input_changed()
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 36-36, warpins: 2 ---
	return
	--- END OF BLOCK #1 ---



end

SocialMenuRosterView._assign_roster_grid_scrollbar = function (self, roster_grid, widgets)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-17, warpins: 1 ---
	local scrollbar_widget = self._widgets_by_name.roster_scrollbar
	local interaction_scenegraph_id = "roster_grid"

	roster_grid:assign_scrollbar(scrollbar_widget, ROSTER_GRID_SCENEGRAPH_ID, interaction_scenegraph_id)

	local scrollbar_visible = roster_grid:can_scroll()
	local list_divider_style = RosterViewStyles.blueprints.list_divider
	local divider_width = (scrollbar_visible and list_divider_style.width_with_scrollbar) or list_divider_style.width_without_scrollbar

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 22-25, warpins: 2 ---
	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 26-33, warpins: 0 ---
	for i = 1, #widgets, 1 do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 26-30, warpins: 2 ---
		local widget = widgets[i]
		local divider_style = widget.style.divider

		if divider_style then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 31-32, warpins: 1 ---
			divider_style.size[1] = divider_width
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 33-33, warpins: 2 ---
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 34-34, warpins: 1 ---
	return
	--- END OF BLOCK #3 ---



end

SocialMenuRosterView._create_roster_widgets = function (self, widget_data)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-7, warpins: 1 ---
	local widgets = {}
	local widget_alignments = {}
	local current_default_blueprint_name = "list_divider"

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 8-32, warpins: 0 ---
	for i = 1, #widget_data, 1 do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 8-12, warpins: 2 ---
		local widget_info = widget_data[i]
		local blueprint_name = current_default_blueprint_name

		if not widget_info.account_id then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 13-16, warpins: 1 ---
			blueprint_name = widget_info.blueprint

			if widget_info.item_blueprint then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 17-17, warpins: 1 ---
				current_default_blueprint_name = widget_info.item_blueprint
				--- END OF BLOCK #0 ---



			end
			--- END OF BLOCK #0 ---



		end

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 18-19, warpins: 3 ---
		if blueprint_name then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 20-31, warpins: 1 ---
			local widget = self:_get_roster_widget(widget_info, blueprint_name, ROSTER_GRID_ID)
			widgets[#widgets + 1] = widget
			widget_alignments[#widget_alignments + 1] = widget
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #1 ---

		FLOW; TARGET BLOCK #2



		-- Decompilation error in this vicinity:
		--- BLOCK #2 32-32, warpins: 2 ---
		--- END OF BLOCK #2 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 33-46, warpins: 1 ---
	widget_alignments[#widget_alignments + 1] = {
		size = {
			RosterViewStyles.player_panel_size[1] * 2,
			0
		}
	}

	return widgets, widget_alignments
	--- END OF BLOCK #2 ---



end

SocialMenuRosterView._get_roster_widget = function (self, context, blueprint_name, grid_id, optional_unique_id)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-16, warpins: 1 ---
	local scenegraph_id = _SCENEGRAPH_IDS[grid_id]
	local widget_blueprint = Blueprints[blueprint_name]
	local name_suffix = widget_blueprint.get_name_suffix(context, optional_unique_id)
	local widget_name = scenegraph_id .. "_" .. name_suffix

	if self._widgets_by_name[widget_name] then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 17-22, warpins: 1 ---
		local widget = self._widgets_by_name[widget_name]
		local content = widget.content

		if content.blueprint_name == blueprint_name then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 23-24, warpins: 1 ---
			return widget
			--- END OF BLOCK #0 ---



		else

			-- Decompilation error in this vicinity:
			--- BLOCK #0 25-31, warpins: 1 ---
			self:_unregister_widget_name(widget.name)

			if content.portrait_load_id then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 32-35, warpins: 1 ---
				self:_unload_widget_portrait(widget)
				--- END OF BLOCK #0 ---



			end
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 36-40, warpins: 4 ---
	local grid_widget_definitions = self._grid_widget_definitions[grid_id]
	local widget_definition = grid_widget_definitions[blueprint_name]

	if not widget_definition then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 41-51, warpins: 1 ---
		widget_definition = UIWidget.create_definition(widget_blueprint.pass_template, scenegraph_id, {
			blueprint_name = blueprint_name
		}, widget_blueprint.size, widget_blueprint.style)
		grid_widget_definitions[blueprint_name] = widget_definition
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 52-59, warpins: 2 ---
	local widget = self:_create_widget(widget_name, widget_definition)

	if widget_blueprint.init then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 60-69, warpins: 1 ---
		widget_blueprint.init(self, widget, context, callback(self, "cb_show_popup_menu_for_player", context))
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 70-70, warpins: 2 ---
	return widget
	--- END OF BLOCK #3 ---



end

SocialMenuRosterView._handle_input = function (self, input_service, dt, t)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-3, warpins: 1 ---
	if self._popup_menu then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 4-4, warpins: 1 ---
		return
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 5-7, warpins: 2 ---
	local focused_grid_id = self._focused_grid_id

	if focused_grid_id then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 8-15, warpins: 1 ---
		local grids = self._grids
		local party_grid = grids[PARTY_GRID_ID]
		local roster_grid = grids[ROSTER_GRID_ID]

		if focused_grid_id == ROSTER_GRID_ID then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 16-30, warpins: 1 ---
			local roster_grid_selected_index = roster_grid:selected_grid_index()
			local widget = self._roster_widgets[roster_grid_selected_index]
			local widget_column = widget.content.column
			local num_party_members = #self._party_widgets

			if input_service:get("navigate_left_continuous") and self._selected_roster_widget_column_last_frame == 1 then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 34-62, warpins: 1 ---
				local roster_grid_first_visible_row = self:_get_roster_grid_first_visible_row()
				local visible_content_row = widget.content.row - (roster_grid_first_visible_row - 1)
				local party_selected_index = math.clamp(visible_content_row, 1, num_party_members)

				party_grid:focus_grid_index(party_selected_index)
				roster_grid:focus_grid_index(nil)

				self._selected_roster_widget_column_last_frame = nil
				self._focused_grid_id = PARTY_GRID_ID

				self:_on_navigation_input_changed()
				--- END OF BLOCK #0 ---



			else

				-- Decompilation error in this vicinity:
				--- BLOCK #0 63-64, warpins: 2 ---
				self._selected_roster_widget_column_last_frame = widget_column
				--- END OF BLOCK #0 ---



			end
			--- END OF BLOCK #0 ---



		else

			-- Decompilation error in this vicinity:
			--- BLOCK #0 65-70, warpins: 1 ---
			if input_service:get("navigate_right_continuous") and #self._roster_widgets > 0 then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 76-88, warpins: 1 ---
				local party_selected_index = party_grid:selected_grid_index()
				local roster_widgets = self._roster_widgets
				local roster_grid_first_visible_row = self:_get_roster_grid_first_visible_row()
				local desired_row = roster_grid_first_visible_row - 1 + party_selected_index

				--- END OF BLOCK #0 ---

				FLOW; TARGET BLOCK #1



				-- Decompilation error in this vicinity:
				--- BLOCK #1 89-114, warpins: 0 ---
				for i = #roster_widgets, 1, -1 do

					-- Decompilation error in this vicinity:
					--- BLOCK #0 89-93, warpins: 2 ---
					local widget_content = roster_widgets[i].content

					if widget_content.hotspot and widget_content.row <= desired_row and widget_content.column == 1 then

						-- Decompilation error in this vicinity:
						--- BLOCK #0 100-113, warpins: 1 ---
						party_grid:focus_grid_index(nil)
						roster_grid:focus_grid_index(i)

						self._focused_grid_id = ROSTER_GRID_ID

						self:_on_navigation_input_changed()

						--- END OF BLOCK #0 ---

						FLOW; TARGET BLOCK #1



						-- Decompilation error in this vicinity:
						--- BLOCK #1 114-114, warpins: 1 ---
						break
						--- END OF BLOCK #1 ---



					end
					--- END OF BLOCK #0 ---

					FLOW; TARGET BLOCK #1



					-- Decompilation error in this vicinity:
					--- BLOCK #1 114-114, warpins: 3 ---
					--- END OF BLOCK #1 ---



				end
				--- END OF BLOCK #1 ---



			end
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 115-120, warpins: 7 ---
	if input_service:get("navigate_secondary_right_pressed") then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 121-137, warpins: 1 ---
		self:_play_sound(UISoundEvents.tab_secondary_button_pressed)

		local next_index = math.index_wrapper(self._current_list_index + 1, #self._roster_lists)

		self:set_next_roster_filter(next_index)
		--- END OF BLOCK #0 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 138-143, warpins: 1 ---
		if input_service:get("navigate_secondary_left_pressed") then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 144-159, warpins: 1 ---
			self:_play_sound(UISoundEvents.tab_secondary_button_pressed)

			local previous_index = math.index_wrapper(self._current_list_index - 1, #self._roster_lists)

			self:set_next_roster_filter(previous_index)
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 160-160, warpins: 3 ---
	return
	--- END OF BLOCK #3 ---



end

SocialMenuRosterView._get_roster_grid_first_visible_row = function (self)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-16, warpins: 1 ---
	local roster_grid = self._grids[ROSTER_GRID_ID]
	local roster_widgets = self._roster_widgets
	local half_row_height = (RosterViewStyles.player_panel_size[2] + RosterViewStyles.grid_spacing[2]) / 2

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 17-32, warpins: 0 ---
	for i = 1, #roster_widgets, 1 do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 17-21, warpins: 2 ---
		local widget = roster_widgets[i]
		local widget_hotspot = widget.content.hotspot

		if widget_hotspot and roster_grid:is_widget_visible(widget, -half_row_height) then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 29-31, warpins: 1 ---
			return widget.content.row
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 32-32, warpins: 3 ---
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 33-34, warpins: 1 ---
	return 0
	--- END OF BLOCK #2 ---



end

local _list_dividers = {}

SocialMenuRosterView._prepare_list = function (self, roster_list_data, roster_list, new_list_items)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-4, warpins: 1 ---
	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 5-7, warpins: 0 ---
	for i = 1, #new_list_items, 1 do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 5-7, warpins: 2 ---
		roster_list[i] = new_list_items[i]
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 8-12, warpins: 1 ---
	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 13-15, warpins: 0 ---
	for i = #new_list_items + 1, #roster_list, 1 do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 13-15, warpins: 2 ---
		roster_list[i] = nil
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #3 ---

	FLOW; TARGET BLOCK #4



	-- Decompilation error in this vicinity:
	--- BLOCK #4 16-27, warpins: 1 ---
	local sort_function = roster_list_data.primary_sort_function

	table.sort(roster_list, sort_function)

	local prev_index = #roster_list
	local prev_item = roster_list[prev_index]

	--- END OF BLOCK #4 ---

	FLOW; TARGET BLOCK #5



	-- Decompilation error in this vicinity:
	--- BLOCK #5 28-38, warpins: 0 ---
	for i = prev_index - 1, 1, -1 do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 28-30, warpins: 2 ---
		local current_item = roster_list[i]

		if current_item == prev_item then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 31-35, warpins: 1 ---
			table.remove(roster_list, prev_index)
			--- END OF BLOCK #0 ---



		end

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 36-38, warpins: 2 ---
		prev_index = i
		prev_item = current_item
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #5 ---

	FLOW; TARGET BLOCK #6



	-- Decompilation error in this vicinity:
	--- BLOCK #6 39-46, warpins: 1 ---
	local group_select_function = roster_list_data.group_select_function
	local groups = roster_list_data.groups
	local group_counter = 0
	local current_group_id = #groups

	--- END OF BLOCK #6 ---

	FLOW; TARGET BLOCK #7



	-- Decompilation error in this vicinity:
	--- BLOCK #7 47-111, warpins: 0 ---
	for i = #roster_list, 1, -1 do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 47-52, warpins: 2 ---
		local player_info = roster_list[i]
		local group_id = group_select_function(player_info)

		if group_id ~= current_group_id and group_counter > 0 then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 56-66, warpins: 1 ---
			local group = groups[current_group_id]
			group.num_members = group_counter

			table.insert(roster_list, i + 1, group)

			if not group.header then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 67-68, warpins: 2 ---
				--- END OF BLOCK #0 ---

				FLOW; TARGET BLOCK #1



				-- Decompilation error in this vicinity:
				--- BLOCK #1 72-76, warpins: 0 ---
				while group_id < current_group_id and not group.header do

					-- Decompilation error in this vicinity:
					--- BLOCK #0 72-72, warpins: 1 ---
					--- END OF BLOCK #0 ---

					FLOW; TARGET BLOCK #1



					-- Decompilation error in this vicinity:
					--- BLOCK #1 73-75, warpins: 1 ---
					current_group_id = current_group_id - 1
					group = groups[current_group_id]
					--- END OF BLOCK #1 ---

					FLOW; TARGET BLOCK #2



					-- Decompilation error in this vicinity:
					--- BLOCK #2 76-76, warpins: 1 ---
					--- END OF BLOCK #2 ---



				end

				--- END OF BLOCK #1 ---

				FLOW; TARGET BLOCK #2



				-- Decompilation error in this vicinity:
				--- BLOCK #2 76-77, warpins: 2 ---
				if current_group_id ~= group_id then

					-- Decompilation error in this vicinity:
					--- BLOCK #0 78-84, warpins: 1 ---
					group.num_members = group_counter

					table.insert(roster_list, i + 1, group)
					--- END OF BLOCK #0 ---



				end
				--- END OF BLOCK #2 ---



			end

			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 85-87, warpins: 3 ---
			if not group.no_divider then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 88-92, warpins: 1 ---
				group_counter = 0
				local divider = _list_dividers[group_id]

				if not divider then

					-- Decompilation error in this vicinity:
					--- BLOCK #0 93-97, warpins: 1 ---
					divider = {
						blueprint = "list_divider",
						name = group_id
					}
					_list_dividers[divider] = divider
					--- END OF BLOCK #0 ---



				end

				--- END OF BLOCK #0 ---

				FLOW; TARGET BLOCK #1



				-- Decompilation error in this vicinity:
				--- BLOCK #1 98-103, warpins: 2 ---
				table.insert(roster_list, i + 1, divider)
				--- END OF BLOCK #1 ---



			end

			--- END OF BLOCK #1 ---

			FLOW; TARGET BLOCK #2



			-- Decompilation error in this vicinity:
			--- BLOCK #2 104-105, warpins: 2 ---
			current_group_id = group_id
			--- END OF BLOCK #2 ---



		else

			-- Decompilation error in this vicinity:
			--- BLOCK #0 106-107, warpins: 2 ---
			if current_group_id ~= group_id then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 108-109, warpins: 1 ---
				current_group_id = group_id
				group_counter = 0
				--- END OF BLOCK #0 ---



			end
			--- END OF BLOCK #0 ---



		end

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 110-111, warpins: 3 ---
		group_counter = group_counter + 1
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #7 ---

	FLOW; TARGET BLOCK #8



	-- Decompilation error in this vicinity:
	--- BLOCK #8 112-122, warpins: 1 ---
	local group = groups[current_group_id]
	group.num_members = group_counter

	table.insert(roster_list, 1, group)

	if not group.header then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 123-125, warpins: 2 ---
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 126-130, warpins: 0 ---
		while not group.header do

			-- Decompilation error in this vicinity:
			--- BLOCK #0 126-126, warpins: 1 ---
			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 127-129, warpins: 1 ---
			current_group_id = current_group_id - 1
			group = groups[current_group_id]
			--- END OF BLOCK #1 ---

			FLOW; TARGET BLOCK #2



			-- Decompilation error in this vicinity:
			--- BLOCK #2 130-130, warpins: 1 ---
			--- END OF BLOCK #2 ---



		end

		--- END OF BLOCK #1 ---

		FLOW; TARGET BLOCK #2



		-- Decompilation error in this vicinity:
		--- BLOCK #2 130-136, warpins: 1 ---
		group.num_members = group_counter

		table.insert(roster_list, 1, group)
		--- END OF BLOCK #2 ---



	end

	--- END OF BLOCK #8 ---

	FLOW; TARGET BLOCK #9



	-- Decompilation error in this vicinity:
	--- BLOCK #9 137-137, warpins: 2 ---
	return
	--- END OF BLOCK #9 ---



end

SocialMenuRosterView._close_popup_menu = function (self)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-14, warpins: 1 ---
	self._popup_menu:close(callback(self, "cb_on_popup_menu_closed"))
	self:_fade_widgets("in", true)

	return
	--- END OF BLOCK #0 ---



end

SocialMenuRosterView._remove_popup_menu = function (self)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-7, warpins: 1 ---
	self._popup_menu = nil

	self:_remove_element(POPUP_NAME)

	return
	--- END OF BLOCK #0 ---



end

SocialMenuRosterView._fade_widgets = function (self, direction, should_delay)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-5, warpins: 1 ---
	self._widgets_are_fading = direction
	self._fade_time = 0
	self._fade_delay = (should_delay and SocialMenuSettings.widget_fade_delay) or 0

	return
	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 11-12, warpins: 2 ---
	--- END OF BLOCK #1 ---



end

SocialMenuRosterView._update_roster_list = function (self, list_index, new_list_items, should_update_widgets)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-11, warpins: 1 ---
	local roster_list_data = self._roster_lists[list_index]
	local roster_list = roster_list_data.sorted_list

	self:_prepare_list(roster_list_data, roster_list, new_list_items)

	if should_update_widgets then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 12-14, warpins: 1 ---
		local widgets = self._roster_widgets
		local num_items = (widgets and #widgets) or 0
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 19-21, warpins: 2 ---
		local lists_are_identical = #roster_list == num_items
		--- END OF BLOCK #1 ---

		FLOW; TARGET BLOCK #2



		-- Decompilation error in this vicinity:
		--- BLOCK #2 25-25, warpins: 2 ---
		local i = 1

		--- END OF BLOCK #2 ---

		FLOW; TARGET BLOCK #3



		-- Decompilation error in this vicinity:
		--- BLOCK #3 26-27, warpins: 2 ---
		--- END OF BLOCK #3 ---

		FLOW; TARGET BLOCK #4



		-- Decompilation error in this vicinity:
		--- BLOCK #4 30-75, warpins: 0 ---
		while lists_are_identical and i <= num_items do

			-- Decompilation error in this vicinity:
			--- BLOCK #0 30-30, warpins: 1 ---
			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 31-36, warpins: 1 ---
			local old_item_content = widgets[i].content
			local old_item_player_info = old_item_content.player_info
			local new_item = roster_list[i]

			if old_item_player_info and old_item_player_info == new_item then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 39-44, warpins: 1 ---
				lists_are_identical = old_item_content.online_status == new_item:online_status() and old_item_content.is_blocked == new_item:is_blocked()
				--- END OF BLOCK #0 ---

				FLOW; TARGET BLOCK #1



				-- Decompilation error in this vicinity:
				--- BLOCK #1 54-54, warpins: 2 ---
				--- END OF BLOCK #1 ---



			else

				-- Decompilation error in this vicinity:
				--- BLOCK #0 55-56, warpins: 2 ---
				if not old_item_player_info and not new_item.online_status then

					-- Decompilation error in this vicinity:
					--- BLOCK #0 60-63, warpins: 1 ---
					lists_are_identical = old_item_content.header == new_item.header and old_item_content.num_members == new_item.num_members
					--- END OF BLOCK #0 ---

					FLOW; TARGET BLOCK #1



					-- Decompilation error in this vicinity:
					--- BLOCK #1 71-71, warpins: 2 ---
					--- END OF BLOCK #1 ---



				else

					-- Decompilation error in this vicinity:
					--- BLOCK #0 72-72, warpins: 2 ---
					lists_are_identical = false
					--- END OF BLOCK #0 ---



				end
				--- END OF BLOCK #0 ---



			end

			--- END OF BLOCK #1 ---

			FLOW; TARGET BLOCK #2



			-- Decompilation error in this vicinity:
			--- BLOCK #2 73-74, warpins: 3 ---
			i = i + 1
			--- END OF BLOCK #2 ---

			FLOW; TARGET BLOCK #3



			-- Decompilation error in this vicinity:
			--- BLOCK #3 75-75, warpins: 3 ---
			--- END OF BLOCK #3 ---



		end

		--- END OF BLOCK #4 ---

		FLOW; TARGET BLOCK #5



		-- Decompilation error in this vicinity:
		--- BLOCK #5 75-76, warpins: 2 ---
		if lists_are_identical and self._grids[ROSTER_GRID_ID] then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 82-86, warpins: 1 ---
			self:_update_current_list_widgets(roster_list)
			--- END OF BLOCK #0 ---



		else

			-- Decompilation error in this vicinity:
			--- BLOCK #0 87-88, warpins: 2 ---
			if not lists_are_identical then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 89-92, warpins: 1 ---
				self:_setup_roster_grid(roster_list)
				--- END OF BLOCK #0 ---



			end
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #5 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 93-93, warpins: 4 ---
	return
	--- END OF BLOCK #1 ---



end

SocialMenuRosterView._update_party_list = function (self, party_members, force_update)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-3, warpins: 1 ---
	local current_party_widgets = self._party_widgets
	local list_is_changed = force_update or false

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 5-8, warpins: 2 ---
	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 9-31, warpins: 0 ---
	for i = #current_party_widgets, 1, -1 do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 9-14, warpins: 2 ---
		local party_widget = current_party_widgets[i]
		local party_member_content = party_widget.content
		local unique_id = party_member_content.unique_id

		if not party_members[unique_id] then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 15-21, warpins: 1 ---
			table.remove(current_party_widgets, i)

			list_is_changed = true
			--- END OF BLOCK #0 ---



		else

			-- Decompilation error in this vicinity:
			--- BLOCK #0 22-30, warpins: 1 ---
			local player_info = party_member_content.player_info
			party_member_content.party_status = player_info:party_status()
			party_member_content.online_status = player_info:online_status()
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 31-31, warpins: 2 ---
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 32-35, warpins: 1 ---
	--- END OF BLOCK #3 ---

	FLOW; TARGET BLOCK #4



	-- Decompilation error in this vicinity:
	--- BLOCK #4 36-63, warpins: 0 ---
	for unique_id, player_info in pairs(party_members) do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 36-40, warpins: 1 ---
		local is_in_party = false

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 41-47, warpins: 0 ---
		for i = 1, #current_party_widgets, 1 do

			-- Decompilation error in this vicinity:
			--- BLOCK #0 41-45, warpins: 2 ---
			local widget = current_party_widgets[i]
			local content = widget.content

			if unique_id == content.unique_id then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 46-46, warpins: 1 ---
				is_in_party = true
				--- END OF BLOCK #0 ---



			end
			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 47-47, warpins: 2 ---
			--- END OF BLOCK #1 ---



		end

		--- END OF BLOCK #1 ---

		FLOW; TARGET BLOCK #2



		-- Decompilation error in this vicinity:
		--- BLOCK #2 48-49, warpins: 1 ---
		if not is_in_party then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 50-61, warpins: 1 ---
			Log.info("SocialMenuRosterView", "%s not in party. Adding to party", unique_id)
			self:_add_to_party(unique_id, player_info)

			list_is_changed = true
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #2 ---

		FLOW; TARGET BLOCK #3



		-- Decompilation error in this vicinity:
		--- BLOCK #3 62-63, warpins: 3 ---
		--- END OF BLOCK #3 ---



	end

	--- END OF BLOCK #4 ---

	FLOW; TARGET BLOCK #5



	-- Decompilation error in this vicinity:
	--- BLOCK #5 64-65, warpins: 1 ---
	if list_is_changed then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 66-88, warpins: 1 ---
		self._grids[PARTY_GRID_ID]:force_update_list_size()

		local party_panel_widget = self._widgets_by_name.party_panel
		local content = party_panel_widget.content
		local num_party_members = #current_party_widgets
		content.num_party_members = num_party_members
		content.header = Managers.localization:localize("loc_social_menu_party_header", true, content)

		self:_on_navigation_input_changed()
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #5 ---

	FLOW; TARGET BLOCK #6



	-- Decompilation error in this vicinity:
	--- BLOCK #6 89-89, warpins: 2 ---
	return
	--- END OF BLOCK #6 ---



end

SocialMenuRosterView._update_current_list_widgets = function (self)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-9, warpins: 1 ---
	local max_num_portraits = SocialMenuSettings.max_num_portraits
	local widgets_with_portraits = self._widgets_with_portraits
	local current_widgets = self._roster_widgets
	local ui_renderer = self._offscreen_renderer

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 10-52, warpins: 0 ---
	for i = 1, #current_widgets, 1 do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 10-14, warpins: 2 ---
		local widget = current_widgets[i]
		local content = widget.content
		local player_info = content.player_info

		if player_info then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 15-24, warpins: 1 ---
			content.party_status = player_info:party_status()
			local player_blocked_status = content.is_blocked
			local player_online_status = content.online_status
			local is_online = player_online_status == OnlineStatus.online and not player_blocked_status
			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 30-34, warpins: 3 ---
			local profile = player_info:profile()

			if is_online and profile and not content.portrait_load_id and content.blueprint_name == "player_plaque" and max_num_portraits > #widgets_with_portraits then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 46-51, warpins: 1 ---
				self:_load_widget_portrait(widget, profile, ui_renderer)
				--- END OF BLOCK #0 ---



			end
			--- END OF BLOCK #1 ---



		end
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 52-52, warpins: 7 ---
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 53-53, warpins: 1 ---
	return
	--- END OF BLOCK #2 ---



end

SocialMenuRosterView._add_to_party = function (self, unique_id, player_info)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-6, warpins: 1 ---
	local party_widgets = self._party_widgets
	local num_party_members = #party_widgets

	if num_party_members < SocialConstants.max_num_party_members then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 7-22, warpins: 1 ---
		local name_extra_identifier = nil
		local blueprint_name = "player_plaque"
		local party_member_widget = self:_get_roster_widget(player_info, blueprint_name, PARTY_GRID_ID, name_extra_identifier)
		local widget_content = party_member_widget.content
		widget_content.party_panel = true
		widget_content.unique_id = unique_id

		if not widget_content.is_own_player then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 23-26, warpins: 1 ---
			local name_or_activity_style = party_member_widget.style.name_or_activity
			name_or_activity_style.default_color = name_or_activity_style.party_member_color
			--- END OF BLOCK #0 ---



		end

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 27-33, warpins: 2 ---
		local profile = party_member_widget.content.player_info:profile()

		if profile then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 34-39, warpins: 1 ---
			self:_load_widget_portrait(party_member_widget, profile, self._ui_renderer)
			--- END OF BLOCK #0 ---



		end

		--- END OF BLOCK #1 ---

		FLOW; TARGET BLOCK #2



		-- Decompilation error in this vicinity:
		--- BLOCK #2 40-41, warpins: 2 ---
		party_widgets[num_party_members + 1] = party_member_widget
		--- END OF BLOCK #2 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 42-42, warpins: 2 ---
	return
	--- END OF BLOCK #1 ---



end

SocialMenuRosterView._refresh_party_list = function (self)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-6, warpins: 1 ---
	local promise = self._party_promise

	if not promise:is_pending() then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 7-17, warpins: 1 ---
		promise = social_service:fetch_party_members()
		promise = promise:next(function (party_members)

			-- Decompilation error in this vicinity:
			--- BLOCK #0 1-4, warpins: 1 ---
			if not self._destroyed then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 5-9, warpins: 1 ---
				self:_update_party_list(party_members)
				--- END OF BLOCK #0 ---



			end

			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 10-10, warpins: 2 ---
			return
			--- END OF BLOCK #1 ---



		end)
		self._party_promise = promise
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 18-19, warpins: 2 ---
	return
	--- END OF BLOCK #1 ---



end

SocialMenuRosterView._refresh_roster_lists = function (self, force_refresh)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-57, warpins: 1 ---
	local blocked_promise = social_service:fetch_blocked_players()
	local player = self:_player()
	local character_id = player:character_id()
	local invites_promise = social_service:fetch_friend_invites():next(function (response)

		-- Decompilation error in this vicinity:
		--- BLOCK #0 1-5, warpins: 1 ---
		local num_invites = 0

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 6-15, warpins: 0 ---
		for i = 1, #response, 1 do

			-- Decompilation error in this vicinity:
			--- BLOCK #0 6-13, warpins: 2 ---
			local player_info = response[i]

			if player_info:friend_status() == FriendStatus.invite then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 14-14, warpins: 1 ---
				num_invites = num_invites + 1
				--- END OF BLOCK #0 ---



			end
			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 15-15, warpins: 2 ---
			--- END OF BLOCK #1 ---



		end

		--- END OF BLOCK #1 ---

		FLOW; TARGET BLOCK #2



		-- Decompilation error in this vicinity:
		--- BLOCK #2 16-18, warpins: 1 ---
		self._num_pending_invites = num_invites

		return response
		--- END OF BLOCK #2 ---



	end)
	local friends_promise = social_service:fetch_friends(force_refresh)
	local recent_companions_promise = social_service:fetch_recent_companions(character_id, force_refresh)
	local players_on_server_promise = social_service:fetch_players_on_server()
	local on_done = callback(self, "cb_update_roster")
	local roster_lists_promise = Promise.all(friends_promise, recent_companions_promise, players_on_server_promise, invites_promise, blocked_promise):next(on_done, on_done):catch(function (e)

		-- Decompilation error in this vicinity:
		--- BLOCK #0 1-5, warpins: 1 ---
		Log.error("Failed fetching social players")

		return
		--- END OF BLOCK #0 ---



	end)
	self._roster_lists_promise = roster_lists_promise

	return
	--- END OF BLOCK #0 ---



end

local _show_confirmation_popup_context = nil

SocialMenuRosterView._show_confirmation_popup = function (self, player_info, command_name, callback_parameter)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-3, warpins: 1 ---
	local context = _show_confirmation_popup_context

	if not context then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 4-16, warpins: 1 ---
		context = {
			description_text_params = {},
			options = {
				{
					text = "loc_social_menu_confirmation_popup_confirm_button",
					close_on_pressed = true,
					hotkey = "confirm_pressed"
				},
				{
					text = "loc_social_menu_confirmation_popup_decline_button",
					template_type = "default_button_small",
					close_on_pressed = true,
					hotkey = "back"
				}
			}
		}
		context.title_text_params = context.description_text_params
		_show_confirmation_popup_context = context
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 17-18, warpins: 2 ---
	local account_id = player_info and player_info:account_id()

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 22-23, warpins: 2 ---
	if account_id then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 24-29, warpins: 1 ---
		local player_name = self:formatted_character_name(player_info)

		if player_name == "" then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 30-33, warpins: 1 ---
			player_name = player_info:user_display_name()
			--- END OF BLOCK #0 ---



		end

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 34-35, warpins: 2 ---
		context.description_text_params.player_name = player_name
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 36-37, warpins: 2 ---
	if account_id or not player_info then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 40-58, warpins: 2 ---
		context.title_text = string.format("loc_social_menu_confirmation_popup_%s_header", command_name)
		context.description_text = string.format("loc_social_menu_confirmation_popup_%s_description", command_name)
		context.options[1].callback = callback(social_service, command_name, callback_parameter or account_id)

		Managers.event:trigger("event_show_ui_popup", context)
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 60-68, warpins: 2 ---
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #3 ---

	FLOW; TARGET BLOCK #4



	-- Decompilation error in this vicinity:
	--- BLOCK #4 69-69, warpins: 2 ---
	return
	--- END OF BLOCK #4 ---



end

return SocialMenuRosterView
